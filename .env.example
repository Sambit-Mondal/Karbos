# Karbos Platform - Environment Configuration

# Server configuration
SERVER_PORT=8080
SERVER_ENVIRONMENT=development

# Production Overrides (uncomment for production)
# SERVER_ENVIRONMENT=production
# NODE_ENV=production
# NEXT_PUBLIC_API_URL=https://api.yourdomain.com

# Database Configuration (Docker Compose)
POSTGRES_DB=karbos
POSTGRES_USER=karbos
POSTGRES_PASSWORD=karbos_secure_password
DATABASE_URL=postgresql://karbos:karbos_secure_password@postgres:5432/karbos?sslmode=disable

# For local development (non-Docker):
# DATABASE_URL=postgresql://postgres:your_password@localhost:5432/karbos?sslmode=disable

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=karbos_redis_password
REDIS_DB=0

# For local development (non-Docker):
# REDIS_HOST=localhost

# Queue Configuration
QUEUE_IMMEDIATE_KEY=karbos:jobs:ready
QUEUE_DELAYED_KEY=karbos:jobs:delayed

# Legacy queue keys (for backwards compatibility):
IMMEDIATE_QUEUE_KEY=karbos:queue:immediate
DELAYED_SET_KEY=karbos:queue:delayed

# Carbon API Configuration
# Get your API key from:
# - ElectricityMaps: https://www.electricitymaps.com/

CARBON_PROVIDER=electricitymaps
CARBON_API_KEY=your_api_key_here
CARBON_BASE_URL=https://api.electricitymap.org/v3
CARBON_CACHE_TTL=1h
CARBON_DEFAULT_REGION=US-EAST

# For WattTime (alternative):
# CARBON_PROVIDER=watttime
# CARBON_API_USERNAME=
# CARBON_API_PASSWORD=
# CARBON_API_URL=

# Worker Configuration
WORKER_POOL_SIZE=4
WORKER_POLL_INTERVAL=2s
WORKER_JOB_TIMEOUT=10m
WORKER_MAX_RETRIES=3

# Docker Configuration (for worker job execution)
DOCKER_HOST=unix:///var/run/docker.sock
DOCKER_MEMORY_LIMIT=536870912
DOCKER_CPU_QUOTA=50000

# Delayed Job Promoter Configuration
PROMOTER_CHECK_INTERVAL=10s

# Circuit Breaker Configuration
CIRCUIT_BREAKER_MAX_FAILURES=5
CIRCUIT_BREAKER_TIMEOUT=30s
CIRCUIT_BREAKER_RESET_TIMEOUT=10s
CIRCUIT_BREAKER_STATIC_FALLBACK=400.0

# Metrics Configuration
METRICS_ENABLED=true
METRICS_PORT=9090

# API Configuration
API_RATE_LIMIT=100
API_TIMEOUT=30s

# Frontend Configuration (Next.js)
NEXT_PUBLIC_API_URL=http://localhost:8080
NODE_ENV=development